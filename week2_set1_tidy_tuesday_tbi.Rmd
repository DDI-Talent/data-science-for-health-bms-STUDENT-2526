---
title: "Week02 TBI"
author: "Data Science Course Team"
date: "`r Sys.Date()`"
output: html_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```

You will need to load the required libraries first: `tidyverse` and `here`. Install `here` if you haven't done that already.

Note: The `here()` function only works if you are working inside an R Project. An R Project tells R where your “home” folder is, so `here()` can find files without you having to write long, messy paths.

In this set of exercises, you'll practice setting up subfolders and moving between them using the `here()` function.

We will assume that you have set up a `Week02` folder, and set up an R project associated with that folder. This file (the set of exercises) should also be saved in the `Week02` folder.

```{r libraries}
# install.packages("here") # Remove the hashtag and run just once. Once installed on your laptop, you won't need to install it ever again.
library(tidyverse)
library(here)
# Note the output in the R console when you load the library `here` - R will show you the path to your working directory, so you know where you are working. The path should lead to your `Week02` folder.
```

We will be using traumatic brain injury data from a Tidy Tuesday challenge. Learn more about the challenge and the data here (spend max 3 minutes looking at the linked page): <https://github.com/rfordatascience/tidytuesday/blob/master/data/2020/2020-03-24/readme.md>

Let's start by loading in the data

```{r loading-data}
tbi_age <- read_csv('https://raw.githubusercontent.com/rfordatascience/tidytuesday/master/data/2020/2020-03-24/tbi_age.csv')
tbi_year <- read_csv('https://raw.githubusercontent.com/rfordatascience/tidytuesday/master/data/2020/2020-03-24/tbi_year.csv')
```

Now, set up subfolders in your working directory (`Week02` folder): raw_data, scripts, plots and tables. Put this RMarkdown document in your `scripts` subfolder (you can do this using your file manager, or using the RStudio Files interface).

### Task 1

Save both datasets in the raw_data folder (use functions `here` and `write_csv`).

```{r saving-data-locally}

```

### Task 2

Use your favourite functions for eyeballing data (bonus if you use the `tidyverse` for this) and write a couple of sentences about each dataset (its dimensions, the variables inside, types of data, etc.)

### Task 3

Imagine that you are preparing a brief for the local health authority, and they have asked you to answer the following questions. For each question, write a chunk of code that would provide the answer in a clean and reproducible way.

### Task 3.1

Which injury mechanism caused the most deaths in total?

```{r most-deaths}

```

### Task 3.2

Looking just at the totals, what is the number of ED visits, hospitalisations and deaths associated with each injury mechanism? Present the results as a table. Save this table in your tables folder.

```{r totals-table}
  
```

### Task 3.3

Focusing on the oldest age group (75+), draw a bar chart illustrating the number of hospitalisations associated with each injury mechanism. Make sure that you add a title and appropriate axis labels. Save this chart in your plots folder.

```{r oldest-hospitalisations}

```
